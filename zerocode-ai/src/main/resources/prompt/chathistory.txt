请参考项目中已有的 User 和 APP 模块的文件和代码风格，帮我根据下列需求，生成完整的 ChatHistory 模块的后端代码。

## 需要的功能如下

1）对话历史的持久化存储：用户发送消息时，需要保存用户消息；AI 成功回复后，需要保存 AI 消息。即使 AI 回复失败，也要记录错误信息，确保对话的完整性。
2）应用级别的数据隔离：每个应用的对话历史都是独立的。删除应用时，需要关联删除该应用的所有对话历史，避免数据冗余。
3）对话历史查询：支持分页查看某个应用的对话历史，需要区分用户和 AI 消息。类似聊天软件的消息加载机制，每次加载最新 10 条消息，支持 向前加载 更多历史记录。（仅应用创建者和管理员可见）
详细来说，进入应用页面时，前端根据应用 id 先加载一次对话历史消息，关联查询最新 10 条消息。如果存在历史对话，直接展示；如果没有历史记录，才自动发送初始化提示词。这样就解决了之前浏览别人的应用时意外触发对话的问题。
4）管理对话历史：管理员可以查看所有应用的对话历史，按照时间降序排序，便于内容监管。

## 实现提示

1）需要为 messageType 创建一个枚举类
